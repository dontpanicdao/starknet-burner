var e={origin:"*",methods:["GET","HEAD","PUT","PATCH","POST","DELETE"],headers:[],expose:[]};function s(s,r){let t=r?{...e,...r}:e;return s.headers.set("Access-Control-Allow-Origin",t.origin),"*"!==t.origin&&s.headers.append("Vary","Origin"),t.credentials&&s.headers.set("Access-Control-Allow-Credentials","true"),t.expose.length&&s.headers.set("Access-Control-Expose-Headers",t.expose),t}function r(e={}){return function(r,t){let o,n=e.origin||"*";if("string"!=typeof n&&(o=r.headers.get("Origin")||"",n=!0===n&&o||n instanceof RegExp&&n.test(o)&&o||"false"),"OPTIONS"===r.method){let t=new Response(null,{status:204}),a=s(t,{...e,origin:n});return a.headers.length?t.headers.set("Access-Control-Allow-Headers",a.headers):(o=r.headers.get("Access-Control-Request-Headers"),o&&t.headers.set("Access-Control-Allow-Headers",o),t.headers.append("Vary","Access-Control-Request-Headers")),null!=a.maxage&&t.headers.set("Access-Control-Max-Age",a.maxage),a.methods.length&&t.headers.set("Access-Control-Allow-Methods",a.methods),t}t.defer((r=>{e.origin=n,s(r,e)}))}}exports.config=e;exports.headers=s;exports.preflight=r;